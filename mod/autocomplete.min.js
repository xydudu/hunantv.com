HN.autocomplete=function(c,j,a){HN.debug("autocomplete is init!");var k={boxId:"autocomplete-box",liclass:"li-selected"},i,h=-1,g=0,b,f,e,d;$.extend(k,a);f=k.boxId;e=k.liclass;c.bind("keyup",(function(q){var l=q.keyCode,t="",s=$(this);t==""?t=c.offset():"";if(l==40){p(++h)}else{if(l==38){p(--h)}else{if(l==13){$("#"+f).hide();$("#"+f+"_bgiframe").hide()}else{if(s.val().replace(" ","").length>=1){if(s.val()!=d){var r={key:s.val()},m=j;HN.ajax.post(m,r,function(o){g=o.length;n(o);d=s.val()})}}else{s.val("")}}}}function p(o){if(o<0){h=0}if(o>=g){h=(g-1)}$("#"+f).find("li").removeClass(e);$("#"+f).find("li").eq(h).addClass(e);c.val($("#"+f).find("li").eq(h).html())}function n(u){var y="",o="";y==""?y=c.width():"";o==""?o=c.height():"";var x,z,w="";for(var v=0;v<u.length;v++){w+="<li>"+u[v]+"</li>"}$("#"+f).length?i=$("#"+f).html(w):i=$("<ul></ul>").attr("id",f).css({position:"absolute",left:t.left+"px",top:t.top+o+2+"px",width:y+"px",zIndex:999}).html(w).hide();$("#"+f).length?"":$("body").append(i);$("#"+f+"_bgiframe").length?x=$("#"+f+"_bgiframe"):x=$('<iframe frameborder="0"></iframe>').attr("id",f+"_bgiframe").css({position:"absolute",left:t.left+"px",top:t.top+o+2+"px",width:y+"px",height:i.height()+"px",zIndex:100,backgroundColor:"#fff"}).hide();$("#"+f+"_bgiframe").length?"":$("body").append(x);x.show();i.show()}}));c.unbind("click blur").click(function(){if(i){i.find("li").eq(h).addClass(e);i.show();$("#"+f+"_bgiframe").show()}});$(document).bind("mousedown blur",function(l){if(!$(l.target).closest("#"+f).length){i?i.hide():"";$("#"+f+"_bgiframe").hide()}});$("#"+f).find("li").die("click").live("click",(function(){c.val($(this).html());h=$("#"+f).find("li").index($(this));$("#"+f).hide();$("#"+f+"_bgiframe").hide()}));$("#"+f).find("li").die("mouseover").live("mouseover",(function(){$("#"+f).find("li").removeClass(e);$(this).addClass(e)})).unbind("mouseout").live("mouseout",(function(){var l;$("#"+f).find("li").removeClass(e);h==-1?"":$("#"+f).find("li").eq(h).addClass(e)}))};
//11/01/06 
