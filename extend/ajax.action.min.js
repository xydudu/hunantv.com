window.HN&&HN.ajax&&(function(){var f=['<div class="f-all" id="{{id}}">','<div class="f-top">','<div class="f-top-l" ></div>','<div class="f-top-r" ></div>','<div class="f-top-m w-top-m"></div>',"</div>",'<div class="f-main">','<div class="f-main-l w-main-l"></div>','<div class="f-main-m w-main-m">',"</div>",'<div class="f-main-r w-main-r">','<div class="f-main-r-bg"></div>',"</div>","</div>",'<div class="f-buttom">','<div class="f-buttom-l"></div>','<div class="f-buttom-r"></div>','<div class="f-buttom-m w-buttom-m">','<div class="f-buttom-m-bg"></div>',"</div>","</div>","</div>"].join(""),e=['<div id="menu-overlay"></div>'].join(""),a=function(){var h=$(window);return{height:h.height(),width:h.width()}},g={del:{ico:"dot_x.gif",text:"\u5220\u9664",className:"hn-action-del"},unfocus:{ico:"dot_x.gif",text:"\u53d6\u6d88\u5173\u6ce8",className:"hn-action-unfocus"},black:{ico:"dot_-.gif",text:"\u52a0\u5165\u9ed1\u540d\u5355",className:"hn-action-block"},disblock:{ico:"dot_x.gif",text:"\u53d6\u6d88\u9ed1\u540d\u5355",className:"hn-action-disblock"},focus:{ico:"dot_+.jpg",text:"\u5173\u6ce8",className:"hn-action-focus"},report:{ico:"dot_!.gif",text:"\u4e3e\u62a5",className:"hn-action-report"},hidden:{ico:"dot_hidden.gif",text:"\u9690\u8eab",className:"hn-action-hidden"}};$("body").click(HN.delegate({".hn-addfocus":function(){var i=$(this),k=i.attr("className").split("-").pop(),h=BASEURL+"relation/follow/add",j=i.attr("over").replace("default","active");HN.ajax.get(h,{oid:k},function(){i.attr({src:j,over:j,className:"hn-focused"});$("#hn-im-dialogbox").length&&HN.IM.updateUserInfo(k)},function(){});return false},".hn-focused":function(){return false},".hn-action-unfocus":function(){var j=$(this),k=j.attr("className").split(" ")[1].split("-"),l=$("#hn-menu-"+k[0]),n=k[1];var h=l.offset(),i=c(h,228,80),m=i.find("div.f-main-m");$("#menu-overlay").trigger("click");m.html(['<div class="chat-msg-del-content">\u662f\u5426\u786e\u5b9a\u53d6\u6d88\u5173\u6ce8\u8be5\u8054\u7cfb\u4eba<br>','<div class="bt-save">','<div class="l bt-save-l">','<img src="'+CSSURL+'ui/mangoq/2010v1/images/ico/loading.gif" style="display:none" id="action-unfocus-loading" />','<input type="image" src="'+CSSURL+'ui/mangoq/2010v1/images/button/sumbit_65x25.jpg" class="hn-unfocus-submit">',"</div>",'<div class="l bt-save-cancel"><a href="javascript:" class="hn-unfocus-close">\u53d6\u6d88</a></div>',"</div></div>"].join(""));i.click(HN.delegate({".hn-unfocus-submit":function(){var o=$("#action-unfocus-loading");o.show();HN.ajax.get(BASEURL+"relation/follow/del",{oid:n},function(){m.html("\u64cd\u4f5c\u6210\u529f\uff01");$("#useritem-"+n).fadeOut(500);setTimeout(function(){i.remove()},500)},function(){m.html("\u5904\u7406\u51fa\u9519\uff01");setTimeout(function(){i.remove()},1500)})},".hn-unfocus-close":function(){i.remove();return false}}));return false},".hn-action-focus":function(){var j=$(this),k=j.attr("className").split(" ")[1].split("-"),l=$("#hn-menu-"+k[0]),n=k[1];var h=l.offset(),i=c(h,228,60),m=i.find("div.f-main-m");$("#menu-overlay").trigger("click");m.html("loading...");HN.ajax.get(BASEURL+"relation/follow/add",{oid:n},function(){m.html("\u64cd\u4f5c\u6210\u529f\uff01");setTimeout(function(){i.remove()},1000);l.find("a.hn-action-focus").html("\u5173\u6ce8\u6210\u529f").removeAttr("className")},function(){m.html("\u64cd\u4f5c\u5931\u8d25\uff01")});return false},".hn-menu":function(){var k=$(this),o,j=k.attr("className").split(" "),l=j[1].split("-"),i=j[2].split("-"),n=l.pop(),m=k.offset();if(k.data("isshow")){$("#"+k.data("menu-id")).hide();k.data("isshow",0);bg.hide();return false}if(k.data("menus")){l=k.data("menus").split("-");o=k.data("menu-id");$("#"+o).show();bg.show();k.data("isshow",1);return false}else{o="hn-menu-"+parseInt(HN.random(1000,2000));k.data("menu-id",o);k.data("cid",n);k.data("menus",l.join("-"));$("body").append(f.replace("{{id}}",o))}if(!$("#menu-overlay").length){$("body").append(e)}bg=$("#menu-overlay");var h=a();h.position="fixed";HN.ie6()&&(h.position="absolute");h.top=0;h.left=0;h.zIndex="900";bg.css(h).show();bg.click(function(){$("#"+k.data("menu-id")).hide();k.data("isshow",0);bg.hide();return false});$("#"+o).css({height:i[1],width:i[0],left:m.left,top:m.top+30,position:"absolute",zIndex:901}).find(".w-top-m,.w-main-m,.w-buttom-m").width(i[0]-24).end().find(".w-main-l,.w-main-m,.w-main-r").height(i[1]-24).end().find("div.f-main-m").html(d(l,n,o.split("-")[2])).end().show();k.data("isshow",1);return false},".hn-action-del":function(){var j=$(this),k=j.attr("className").split(" ")[1].split("-"),m=$("#hn-menu-"+k[0]),o=k[1];var h=m.offset(),i=c(h,228,108),n=i.find("div.f-main-m");$("#menu-overlay").trigger("click");n.html(['<div class="chat-msg-del">','<div class="chat-msg-del-content">\u662f\u5426\u786e\u5b9a\u5220\u9664\u8be5\u8054\u7cfb\u4eba<br>','<input type="checkbox" value="1"  >',"<span>\u540c\u65f6\u52a0\u5165\u9ed1\u540d\u5355</span>",'<div class="bt-save">','<div class="l bt-save-l">','<img src="'+CSSURL+'ui/mangoq/2010v1/images/ico/loading.gif" style="display:none" id="action-del-loading" />','<input type="image" src="'+CSSURL+'ui/mangoq/2010v1/images/button/chat_frame_del.jpg" class="hn-del-submit">',"</div>",'<div class="l bt-save-cancel"><a href="javascript:" class="hn-del-close">\u53d6\u6d88</a></div>',"</div>","</div>",'<div class="chat-msg-del-r"><a href="javascript:"><img border="0" class="hn-del-close" src="'+CSSURL+'ui/mangoq/2010v1/images/ico/action_del_default3.jpg"></a></div>',"</div>"].join("")).show();i.click(HN.delegate({".hn-del-close":function(){i.remove();return false},".hn-del-submit":function(){var p=$("#action-del-loading");p.show();HN.ajax.get(BASEURL+"chat/user/del",{cuid:o},function(){if(i.find("input:checked").length){HN.ajax.get(BASEURL+"relation/black/add",{oid:o},function(){l("\u64cd\u4f5c\u6210\u529f",500);$("#im-isblock-box").length&&HN.IM.removeUser(o)},function(){l("\u64cd\u4f5c\u51fa\u9519",1000)})}else{l("\u64cd\u4f5c\u6210\u529f",500);$("#im-isblock-box").length&&HN.IM.removeUser(o)}},function(){l("\u64cd\u4f5c\u51fa\u9519",1000)});return false}}));function l(p,q){n.html('<div style="padding:20px 0; text-align: center">'+p+"</div>");setTimeout(function(){i.remove()},q)}return false},".hn-action-hidden":function(){var j=$(this),k=j.attr("className").split(" ")[1].split("-"),l=$("#hn-menu-"+k[0]),n=k[1];var h=l.offset(),i=c(h,228,80),m=i.find("div.f-main-m");$("#menu-overlay").trigger("click");m.html(['<div class="chat-msg-del-content">\u662f\u5426\u786e\u5b9a\u5bf9\u8be5\u8054\u7cfb\u4eba\u9690\u8eab<br>','<div class="bt-save">','<div class="l bt-save-l">','<img src="'+CSSURL+'ui/mangoq/2010v1/images/ico/loading.gif" style="display:none" id="action-unhidden-loading" />','<input type="image" src="'+CSSURL+'ui/mangoq/2010v1/images/button/sumbit_65x25.jpg" class="hn-unhidden-submit">',"</div>",'<div class="l bt-save-cancel"><a href="javascript:" class="hn-unhidden-close">\u53d6\u6d88</a></div>',"</div></div>"].join(""));i.click(HN.delegate({".hn-unhidden-submit":function(){var o=$("#action-unhidden-loading");o.show();HN.ajax.get(BASEURL+"relation/hidden/add",{oid:n},function(){m.html("\u64cd\u4f5c\u6210\u529f\uff01");setTimeout(function(){i.remove()},1000);l.find("a.hn-action-focus").html("\u5df2\u9690\u8eab").removeAttr("className")},function(){m.html("\u5904\u7406\u51fa\u9519\uff01");setTimeout(function(){i.remove()},1500)})},".hn-unhidden-close":function(){i.remove();return false}}));return false},"img.deluser":function(){var j=$(this),n=j.attr("className").split("-").pop(),m=$("#user-"+n),h=m.offset();h.left-=230;var i=c(h,228,108),l=i.find("div.f-main-m");l.html(['<div class="chat-msg-del">','<div class="chat-msg-del-content">\u662f\u5426\u786e\u5b9a\u5220\u9664\u8be5\u8054\u7cfb\u4eba<br>','<input type="checkbox" value="1"  >',"<span>\u540c\u65f6\u52a0\u5165\u9ed1\u540d\u5355</span>",'<div class="bt-save">','<div class="l bt-save-l">','<img src="'+CSSURL+'ui/mangoq/2010v1/images/ico/loading.gif" style="display:none" id="action-del-loading" />','<input type="image" src="'+CSSURL+'ui/mangoq/2010v1/images/button/chat_frame_del.jpg" class="hn-del-submit">',"</div>",'<div class="l bt-save-cancel"><a href="javascript:" class="hn-del-close">\u53d6\u6d88</a></div>',"</div>","</div>",'<div class="chat-msg-del-r"><a href="javascript:"><img border="0" class="hn-del-close" src="'+CSSURL+'ui/mangoq/2010v1/images/ico/action_del_default3.jpg"></a></div>',"</div>"].join("")).show();l.click(HN.delegate({".hn-del-submit":function(){var o=$("#action-del-loading");o.show();HN.ajax.get(BASEURL+"chat/user/del",{cuid:n},function(){if(i.find("input:checked").length){HN.ajax.get(BASEURL+"relation/black/add",{oid:n},function(){k("\u64cd\u4f5c\u6210\u529f",500);$("#im-isblock-box").length&&HN.IM.removeUser(n)},function(){k("\u64cd\u4f5c\u51fa\u9519",1000)})}else{k("\u64cd\u4f5c\u6210\u529f",500);$("#im-isblock-box").length&&HN.IM.removeUser(n)}},function(){k("\u64cd\u4f5c\u51fa\u9519",1000)});return false},".hn-del-close":function(){i.remove();return false}}));function k(o,p){l.html('<div style="padding:20px 0; text-align: center">'+o+"</div>");setTimeout(function(){i.remove()},p)}return false},".hn-action-block":function(){var j=$(this),k=j.attr("className").split(" ")[1].split("-"),m=$("#hn-menu-"+k[0]),n=k[1];var h=m.offset(),i=c(h,228,108);inbox=i.find("div.f-main-m");$("#menu-overlay").trigger("click");inbox.html("loading...");HN.ajax.get(BASEURL+"relation/black/add",{oid:n},function(){l("\u64cd\u4f5c\u6210\u529f",1000);if($("#im-isblock-box").length){HN.IM.blockUser(n)}m.find("a.hn-action-focus").html("\u5df2\u5165\u9ed1\u540d\u5355").removeAttr("className")},function(){l("\u64cd\u4f5c\u51fa\u9519",1000)});function l(o,p){inbox.html('<div style="padding:20px 0; text-align: center">'+o+"</div>");setTimeout(function(){i.remove()},p)}},".hn-action-disblock-im":function(){var h=$("im-disblock-loading");cid=$(this).attr("className").split("-").pop();h.length&&h.show();HN.ajax.get(BASEURL+"relation/black/del",{oid:cid},function(){h.length&&h.hide();if($("#im-isblock-box").length){HN.IM.disblockUser(cid)}},function(){h.length&&h.hide();alert("\u64cd\u4f5c\u51fa\u9519")})},".hn-action-disblock":function(){var j=$(this),k=j.attr("className").split(" ")[1].split("-"),l=$("#hn-menu-"+k[0]),n=k[1];var h=l.offset(),i=c(h,228,80),m=i.find("div.f-main-m");$("#menu-overlay").trigger("click");m.html(['<div class="chat-msg-del-content">\u786e\u5b9a\u628a\u8be5\u8054\u7cfb\u4eba\u53d6\u6d88\u9ed1\u540d\u5355<br>','<div class="bt-save">','<div class="l bt-save-l">','<img src="'+CSSURL+'ui/mangoq/2010v1/images/ico/loading.gif" style="display:none" id="action-disblock-loading" />','<input type="image" src="'+CSSURL+'ui/mangoq/2010v1/images/button/sumbit_65x25.jpg" class="hn-disblock-submit">',"</div>",'<div class="l bt-save-cancel"><a href="javascript:" class="hn-disblock-close">\u53d6\u6d88</a></div>',"</div></div>"].join(""));i.click(HN.delegate({".hn-disblock-submit":function(){var o=$("#action-disblock-loading");o.show();HN.ajax.get(BASEURL+"relation/black/del",{oid:n},function(){m.html("\u64cd\u4f5c\u6210\u529f\uff01");$("#useritem-"+n).fadeOut(500);setTimeout(function(){i.remove()},500)},function(){m.html("\u5904\u7406\u51fa\u9519\uff01");setTimeout(function(){i.remove()},1500)})},".hn-disblock-close":function(){i.remove();return false}}));return false},".hn-action-report":function(){var j=$(this),k=j.attr("className").split(" ")[1].split("-"),m=$("#hn-menu-"+k[0]),o=k[1];var h=m.offset(),i=c(h,228,188),n=i.find("div.f-main-m");$("#menu-overlay").trigger("click");n.html(['<div class="chat-msg-del">','<div class="chat-msg-del-content">\u8bf7\u9009\u62e9\u4e3e\u62a5\u7406\u7531<br>','<input type="checkbox" value="1" name="">',"<span>\u53d1\u5c0f\u5e7f\u544a</span><br>",'<input type="checkbox" value="2" name="">',"<span>\u8272\u60c5\u3001\u53cd\u52a8</span><br>",'<input type="checkbox" value="3" name="">',"<span>\u8bc8\u9a97</span><br>",'<input type="checkbox" value="4" name="">',"<span>\u5934\u50cf\u4e0d\u662f\u672c\u4eba</span>",'<div class="c e-7"></div>','<div class="bt-save">','<div class="l bt-save-l">','<img src="'+CSSURL+'/ui/mangoq/2010v1/images/ico/loading.gif" style="display:none" id="action-report-loading" />','<input type="image" src="'+CSSURL+'ui/mangoq/2010v1/images/button/chat_frame_cb.jpg" class="hn-report-submit">',"</div>",'<div class="l bt-save-cancel"><a href="javascript:" class="hn-report-close">\u53d6\u6d88</a></div>',"</div>","</div>",'<div class="chat-msg-del-r"><a href="#"><img border="0" class="hn-report-close" src="'+CSSURL+'ui/mangoq/2010v1/images/ico/action_del_default3.jpg"></a></div>',"</div>"].join(""));n.click(HN.delegate({".hn-report-close":function(){i.remove();return false},".hn-report-submit":function(){var p=$("#action-report-loading"),q={to_uid:o,object_id:"",product_type:4},r=[];if(n.find("input:checked").length){n.find("input:checked").each(function(){r.push(this.value)})}else{alert("\u8bf7\u9009\u62e9\u539f\u56e0");return false}q.reason=r.join(",");p.show();HN.ajax.get(BASEURL+"relation/report/addreport",q,function(){l("\u64cd\u4f5c\u6210\u529f",1000)},function(){l("\u64cd\u4f5c\u51fa\u9519",1000)});return false}}));function l(p,q){n.html('<div style="padding:20px 0; text-align: center">'+p+"</div>");setTimeout(function(){i.remove()},q)}}}));function d(l,j,i){var m=$("<div />").attr("className","type-action-float msg-frame-list"),h=['<div class="c">','<div class="l taf-img"><img border="0" src="'+CSSURL+'ui/mangoq/2010v1/images/ico/[%=ico%]"></div>','<div class="l"><a href="javascript:" class="[%=className%] '+i+"-"+j+'">[%=text%]</a></div>',"</div>"].join(""),k=[];while(l.length){k.push(HN.tmpl(h,g[l.shift()]))}return m.html(k.join(""))}function c(j,k,h){$("#hn-action-box").length&&$("#hn-action-box").remove();$("body").append(f.replace("{{id}}","hn-action-box"));var i=j;i.position="absolute";i.zIndex=902;return b($("#hn-action-box"),k,h).css(i)}function b(j,i,h){return j.height(h).width(i).find(".w-top-m,.w-main-m,.w-buttom-m").width(i-24).end().find(".w-main-l,.w-main-m,.w-main-r").height(h-24).end()}})();
//10/12/29 
