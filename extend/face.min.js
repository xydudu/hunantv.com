window.HN&&window.jQuery&&(HN.face=function(a,e){var b='<div id="face-show-box" style="position:absolute; display:none;" class="f-msgbox w-w242h99"><div class="f-top"> <div class="f-top-l"></div><div class="f-top-r"></div><div class="f-top-m w-top-m"></div></div><div class="f-main"><div class="f-main-l w-main-l"></div><div class="f-main-m w-main-m" id="content_box_face">      </div><div class="f-main-r w-main-r"><div class="f-main-r-bg"></div></div></div><div class="f-buttom"><div class="f-buttom-l"></div><div class="f-buttom-r"></div><div class="f-buttom-m w-buttom-m"><div class="f-buttom-m-bg"></div></div></div></div>';if(a&&e){a.unbind("click").click(function(){var j=$(this),g,h=j.offset(),f="";for(i=0;i<=18;i++){f+='<a href="javascript:" title="%face_'+i+'%"><img border="0" src="http://css.tazai.com/ui/mangoq/2010v1/images/ico/face_'+i+'.jpg" /></a> '}if(!$("#face-show-box").length){$("body").append($(b))}g=$("#face-show-box");g.css({left:h.left-10,top:h.top-79});g.find("#content_box_face").html(f);g.show();g.find("a").unbind("click").bind("click",function(){var l=e.val(),k=$(this).attr("title");e.val(l+k);e.focus();g.hide()});$(document).unbind("mousedown").bind("mousedown",function(k){if(!$(k.target).closest("#face-show-box").length){g.hide()}})})}function d(g,f){if(!f){alert("You must get cursor position first.")}if(g.setSelectionRange){g.focus();g.setSelectionRange(f.start,f.end)}else{if(g.createTextRange){var h=g.createTextRange();if(g.value.length===f.start){h.collapse(false);h.select()}else{h.moveToBookmark(f.bookmark);h.select()}}}}function c(g){var f={text:"",start:0,end:0};g.focus();if(g.setSelectionRange){f.start=g.selectionStart;f.end=g.selectionEnd;f.text=(f.start!=f.end)?g.value.substring(f.start,f.end):""}else{if(document.selection){var h,j=document.selection.createRange(),k=document.body.createTextRange();k.moveToElementText(g);f.text=j.text;f.bookmark=j.getBookmark();for(h=0;k.compareEndPoints("StartToStart",j)<0&&j.moveStart("character",-1)!==0;h++){if(g.value.charAt(h)=="\n"){h++}}f.start=h;f.end=f.text.length+f.start}}return f}return{faceTo:function(f){f=f.replace(/\%face_([0-9]|1[0-8])\%/g,'<img onerror="this.src=\'http://css.tazai.com/ui/mangoq/2010v1/images/ico/face_2.jpg\';" src="http://css.tazai.com/ui/mangoq/2010v1/images/ico/face_$1.jpg"/>');return f}}});
//10/12/30 
