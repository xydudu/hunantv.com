window.HN&&window.jQuery&&(HN.dialog=function(window,undefined){var
wrapper=head=body=foot=bg=bgiframe=0,options={title:'This is a dialog',body:'',foot:'',width:300,bgFrame:true,opacity:0.5,disableBgClick:false,closeClassName:'hn-dialog-close',cssFile:HN.config.url.js+'css/dialog.css'},box=['<div id="hn-dialog">','<div id="hn-dialog-head"></div>','<div id="hn-dialog-body"></div>','<div id="hn-dialog-foot"></div>','</div>'].join(''),ie6=HN.ie6(),cssIsLoaded=0,overlay=['<iframe id="hn-dialog-bgframe" framebroder=0 />','<div id="hn-dialog-overlay"></div>'].join(''),viewHW=function(){var doc=$(window);return{height:doc.height(),width:doc.width()};};function insertCss(){if(cssIsLoaded)return;HN.loadCSS(options.cssFile);cssIsLoaded=1;}
function createBox(){!$('#hn-dialog').length&&$('body').append(box);options.bgFrame&&createBG();wrapper=$('#hn-dialog');head=$('#hn-dialog-head');body=$('#hn-dialog-body');foot=$('#hn-dialog-foot');if(ie6){$(window).scroll(center);$(window).resize(function(){var view=viewHW();bg&&bg.css(view),bgiframe.css(view);});}}
function center(){var scrollTop=$(window).scrollTop();wrapper.css('top',scrollTop+($(window).height()/2));bg&&bg.css('top',scrollTop),bgiframe.css('top',scrollTop);return false;}
function updateBox(){HN.debug(options);HN.debug('IE6? ---------'+ie6);if(!wrapper)return;var attr={'width':options.width,'marginTop':getMarginTop(wrapper.height()),'marginLeft':-(options.width/2)},view=viewHW();ie6&&(attr.position='absolute');wrapper.css(attr);if(bg){view.opacity=options.opacity;bg.css(view);bgiframe.css(view);!options.disableBgClick&&bg.click(HN.dialog.close);if(ie6){bg.css('position','absolute');bgiframe.css('position','absolute');}}
bindClose();}
function getMarginTop($height){var view=viewHW();return-(view.height-$height)/3;}
function createBG(){if(!bg&&!bgiframe){$('body').append(overlay);bg=$('#hn-dialog-overlay');bgiframe=$('#hn-dialog-bgframe');}}
function bindClose(){var elem=$('.'+options.closeClassName);elem.length&&elem.click(HN.dialog.close);}
return{open:function($options){($options&&$options.type)&&($options=undefined);if($options===undefined){HN.debug('is undefined');wrapper&&wrapper.show();}else{wrapper?wrapper.show():createBox();HN.isString($options)&&($options={body:$options});$.extend(options,$options);insertCss();head.html(options.title);body.html(options.body);foot.html(options.foot);}
bg&&bg.show();bgiframe&&bgiframe.show();updateBox();},close:function(){wrapper&&wrapper.hide();bg&&bg.hide();bgiframe&&bgiframe.hide();},destroy:function(){wrapper&&wrapper.remove();bg&&bg.remove();bgiframe&&bgiframe.remove();wrapper=head=body=foot=bg=bgiframe=0;},alert:function($text,$times){var o=this;o.open($text);head.hide();foot.hide();$times&&setTimeout(o.destroy,$times);}};}(window));