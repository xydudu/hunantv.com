window.HN&&window.jQuery&&HN.ajax&&(HN.autocomplete=function(c,j,a){HN.debug("autocomplete is init!");var k={boxId:"autocomplete-box",liclass:"li-selected"},i,h=-1,g=0,b,f,e,d;$.extend(k,a);f=k.boxId;e=k.liclass;c.bind("keyup",(function(l){var t=l.keyCode,r="",n="",u="",p=$(this);r==""?r=c.offset():"";n==""?n=c.width():"";u==""?u=c.height():"";if(t==40){q(++h)}else{if(t==38){q(--h)}else{if(t==13){$("#"+f).hide();$("#"+f+"_bgiframe").hide()}else{if(p.val().replace(" ","").length>=1){if(p.val()!=d){var s={key:p.val()},m=j;HN.ajax.post(m,s,function(o){g=o.length;v(o);d=p.val()})}}else{p.val("")}}}}function q(o){if(o<0){h=0}if(o>=g){h=(g-1)}$("#"+f).find("li").removeClass(e);$("#"+f).find("li").eq(h).addClass(e);c.val($("#"+f).find("li").eq(h).html())}function v(o){var y,z,x="";for(var w=0;w<o.length;w++){x+="<li>"+o[w]+"</li>"}$("#"+f).length?i=$("#"+f).html(x):i=$("<ul></ul>").attr("id",f).css({position:"absolute",left:r.left+"px",top:r.top+u+2+"px",width:n+"px",zIndex:999}).html(x).hide();$("#"+f).length?"":$("body").append(i);$("#"+f+"_bgiframe").length?y=$("#"+f+"_bgiframe"):y=$('<iframe frameborder="0"></iframe>').attr("id",f+"_bgiframe").css({position:"absolute",left:r.left+"px",top:r.top+u+2+"px",width:n+"px",height:i.height()+"px",zIndex:100,backgroundColor:"#fff"}).hide();$("#"+f+"_bgiframe").length?"":$("body").append(y);y.show();i.show()}}));c.unbind("click blur").click(function(){if(i){i.find("li").eq(h).addClass(e);i.show();$("#"+f+"_bgiframe").show()}});$(document).bind("mousedown blur",function(l){if(!$(l.target).closest("#"+f).length){i?i.hide():"";$("#"+f+"_bgiframe").hide()}});$("#"+f).find("li").die("click").live("click",(function(){c.val($(this).html());h=$("#"+f).find("li").index($(this));$("#"+f).hide();$("#"+f+"_bgiframe").hide()}));$("#"+f).find("li").die("mouseover").live("mouseover",(function(){$("#"+f).find("li").removeClass(e);$(this).addClass(e)})).unbind("mouseout").live("mouseout",(function(){var l;$("#"+f).find("li").removeClass(e);h==-1?"":$("#"+f).find("li").eq(h).addClass(e)}))});
//10/12/29 
