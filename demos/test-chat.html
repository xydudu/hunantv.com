<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>Test-chat</title>
    <script src="http://jsdev.hunantv.com/hn.source.js"></script>
    <style>
        .honey-im-box {
            background-color: gray;
            padding: 10px;
            color: #fff
        } 
    </style>
</head>
<body>
    <h1>Honey IM demos</h1>
    <input type="button" id="request-chat" value="request-chat" /> 
    <input type="button" id="send-msg" value="send-msg" /> 
    <input type="button" id="left" value="close a chat" /> 
    <p id="status"></p>
    <script>
        HN.openDevMode();
        HN.go('jquery, ape.client, IM', function() {
            
            $('#request-chat, #send-msg').hide();
            var 
            statu = $('#status'),
            hash = +window.location.hash.substr(1),
            im = new HN.IM(function($ape) {
                
                if (!hash) {
                    statu.html('UID错误');
                    return;
                }  

                statu.html(hash +' connecting...');
                im.connect($ape, ''+ hash);
                
                $('#request-chat').click(function() {
                    im.requestChat($ape, prompt('Her uid?')); 
                    return false; 
                });

                $('#send-msg').click(function() {
                    im.sendMsg($ape, prompt('say something?'));
                    return false; 
                });
                 
                $('#left').click(function() {
                    im.closeChat($ape, prompt('Close who?')); 
                    return false;
                });
            });

        });
    </script>
</body>
</html>
